<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chamados Transporte</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="/static/fontawesome-free-6.6.0-web/css/all.min.css">
</head>

<body>
    <header>

        <!-- Botão de logout no canto superior direito -->
        <div class="logout-container">
            <form id="logoutForm" action="{{ url_for('logout') }}" method="POST">
                {{ form.hidden_tag() }} <!-- Proteção CSRF -->
                <button type="submit" class="logout-button">Sair</button>
            </form>
        </div>

        <div id="filter-container">
            <label for="id-filter">Filtrar por ID:</label>
            <input type="text" id="id-filter" placeholder="Digite o ID">
        
        <div id="status-filter">
            <span>Filtrar por Status:</span>
            <label><input type="checkbox" value="Aberta" class="status-checkbox"> Aberta</label>
            <label><input type="checkbox" value="Em Atendimento" class="status-checkbox"> Em Atendimento</label>
            <label><input type="checkbox" value="Em Pausa" class="status-checkbox"> Em Pausa</label>
            <label><input type="checkbox" value="Cancelado" class="status-checkbox"> Cancelado</label>
            <label><input type="checkbox" value="Finalizada" class="status-checkbox"> Finalizada</label>
        </div>  
            
        <div id="counter-container">
            <span id="result-counter">0</span> resultados encontrados
        </div>
    </div> 
    </header>
    
    <main>

        <!-- Botão para voltar ao índice -->
        <a href="{{ url_for('home') }}" class="back-to-index">
            <i class="fas fa-home"></i>
        </a>

        <div class="table-container">
            <table id="chamados-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Status</th>
                        <th>Data Abertura</th>
                        <th>Data/Horario</th>
                        <th>Tipo</th>
                        <th>Solicitante</th>
                        <th>Setor</th>
                        <th>Descrição</th>
                        <th>Local</th>
                        <th>Endereço</th>
                        <th>OBS</th>
                    </tr>
                </thead>
                <tbody>
                    {% for chamado in dados %}
                    <tr>
                        <td>{{ chamado.id }}</td>
                        <td>{{ chamado.status }}</td>
                        <td>{{ chamado.data_abertura }}</td>
                        <td>{{ chamado.data_horario }}</td>
                        <td>{{ chamado.tipo }}</td>
                        <td>{{ chamado.solicitante }}</td>
                        <td>{{ chamado.departamento }}</td>
                        <td>{{ chamado.descricao }}</td>
                        <td>{{ chamado.local }}</td>
                        <td>{{ chamado.endereço }}</td>
                        <td>{{ chamado.obs }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </main>

    <!-- Botão flutuante -->
    <a href="#" class="back-to-top" onclick="window.scrollTo({ top: 0, behavior: 'smooth' }); return false;">
        ⬆️
    </a>

    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
    
    <a href="https://wa.me/+554197690395" class="whatsapp-button" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

</body>

</html>
